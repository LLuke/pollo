<project name="pollo" default="compile">

	<path id="classpath">
		<pathelement location="build"/>
		<pathelement location="lib/xerces.jar"/>
		<pathelement location="lib/xalan.jar"/>
	</path>

	<property name="version" value="0.1"/>

	<target name="compile">
		<javac srcdir="src" destdir="build">
			<classpath refid="classpath"/>
		</javac>
	</target>

	<target name="run" depends="compile">
		<java classname="org.outerj.smeditor.SitemapEditor" fork="true">
			<classpath refid="classpath"/>
		</java>
	</target>

	<target name="trun" depends="compile">
		<java classname="org.outerj.testeditor.TestEditor" fork="true">
			<classpath refid="classpath"/>
		</java>
	</target>


	<target name="dist">
		<!-- recompile everything -->
		<delete dir="build"/>
		<mkdir dir="build"/>
		<antcall target="compile"/>


		<!-- remake dist -->
		<delete dir="dist"/>
		<mkdir dir="dist"/>

		<!-- copy everything that we want in the distribution -->
		<copy todir="dist/src">
			<fileset dir="src" excludes="*~,*.swp"/>
		</copy>
		<copy todir="dist/conf">
			<fileset dir="conf" excludes="*~"/>
		</copy>
		<copy todir="dist/build">
			<fileset dir="build"/>
		</copy>
		<copy file="LICENSE" todir="dist"/>
		<copy file="run.sh" todir="dist"/>
		<copy file="run.bat" todir="dist"/>
		<copy todir="dist/lib">
			<fileset dir="lib"/>
		</copy>
	</target>


	<target name="zip" depends="dist">
		<zip zipfile="pollo-${version}.zip">
			<zipfileset dir="dist" prefix="pollo"/>
		</zip>
	</target>

	<target name="fontlister" depends="compile">
		<java classname="org.outerj.tool.FontLister" fork="true">
			<classpath refid="classpath"/>
		</java>
	</target>

	<target name="apidoc">
		<delete file="apidoc"/>
		<mkdir dir="apidoc"/>
		<javadoc packagenames="org.outerj.*" sourcepath="src" destdir="apidoc">
			<link href="http://java.sun.com/products/jdk/1.3/docs/api"/>
			<link href="http://xml.apache.org/xerces-j/apiDocs"/>
			<link href="http://xml.apache.org/xalan-j/apidocs"/>

			<classpath refid="classpath"/>
		</javadoc>
	</target>

</project>
